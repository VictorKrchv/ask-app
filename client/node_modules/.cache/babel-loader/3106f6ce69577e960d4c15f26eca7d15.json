{"ast":null,"code":"import { questionsAPI } from \"../Api/api\";\nconst SET_QUESTION_DATA = \"SET_QUESTION_DATA\";\nconst SET_ANSWERS = \"SET_ANSWERS\";\nconst SET_LOADING = \"SET_LOADING\";\nlet initialState = {\n  question: {\n    title: null,\n    text: null,\n    likes: null,\n    author: null,\n    date: null\n  },\n  answers: [// {\n    //     author: \"author\",\n    //     date: \"\",\n    //     likes: 10,\n    //     text: \"Lorem fsgdfsg dfg dfg fdg fdg fdg fdg fdgfdgfdgfd\",\n    //     id: \"321321321\"\n    // },\n  ],\n  isLoading: false\n};\n\nconst questionReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_QUESTION_DATA:\n      {\n        return { ...state,\n          question: { ...action.payload\n          },\n          answers: action.answers\n        };\n      }\n\n    case SET_ANSWERS:\n      {\n        return { ...state,\n          answers: action.answers\n        };\n      }\n\n    case SET_LOADING:\n      {\n        debugger;\n        return { ...state,\n          isLoading: !state.isLoading\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst setQuestionData = (title, text, likes, author, date, answers) => ({\n  type: SET_QUESTION_DATA,\n  payload: {\n    title,\n    text,\n    likes,\n    author,\n    date\n  },\n  answers\n});\n\nconst toggleLoading = () => ({\n  type: SET_LOADING\n});\n\nconst setAnswers = answers => ({\n  type: SET_ANSWERS,\n  answers\n});\n\nexport const getQuestionData = id => async dispatch => {\n  try {\n    dispatch(toggleLoading);\n    let response = await questionsAPI.getQuestion(id);\n    dispatch(toggleLoading);\n    const {\n      title,\n      text,\n      likes,\n      author,\n      date,\n      answers\n    } = response.data;\n    dispatch(setQuestionData(title, text, likes, author.email, date, answers));\n  } catch (e) {\n    dispatch(setQuestionData(null, null, null, null, null));\n    console.log(e);\n  }\n};\nexport default questionReducer;","map":{"version":3,"sources":["C:/Users/Viktor/WebstormProjects/askProject/client/src/Redux/question-reducer.js"],"names":["questionsAPI","SET_QUESTION_DATA","SET_ANSWERS","SET_LOADING","initialState","question","title","text","likes","author","date","answers","isLoading","questionReducer","state","action","type","payload","setQuestionData","toggleLoading","setAnswers","getQuestionData","id","dispatch","response","getQuestion","data","email","e","console","log"],"mappings":"AAAA,SAAQA,YAAR,QAA2B,YAA3B;AAEA,MAAMC,iBAAiB,GAAG,mBAA1B;AACA,MAAMC,WAAW,GAAG,aAApB;AACA,MAAMC,WAAW,GAAG,aAApB;AAEA,IAAIC,YAAY,GAAG;AACfC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,KAAK,EAAE,IADD;AAENC,IAAAA,IAAI,EAAE,IAFA;AAGNC,IAAAA,KAAK,EAAE,IAHD;AAINC,IAAAA,MAAM,EAAE,IAJF;AAKNC,IAAAA,IAAI,EAAE;AALA,GADK;AAQfC,EAAAA,OAAO,EAAE,CACL;AACA;AACA;AACA;AACA;AACA;AACA;AAPK,GARM;AAiBfC,EAAAA,SAAS,EAAE;AAjBI,CAAnB;;AAqBA,MAAMC,eAAe,GAAG,CAACC,KAAK,GAAGV,YAAT,EAAuBW,MAAvB,KAAkC;AACtD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKf,iBAAL;AAAwB;AACpB,eAAO,EACH,GAAGa,KADA;AAEHT,UAAAA,QAAQ,EAAE,EAAC,GAAGU,MAAM,CAACE;AAAX,WAFP;AAGHN,UAAAA,OAAO,EAAEI,MAAM,CAACJ;AAHb,SAAP;AAMH;;AACD,SAAKT,WAAL;AAAmB;AACf,eAAO,EACH,GAAGY,KADA;AAEHH,UAAAA,OAAO,EAAEI,MAAM,CAACJ;AAFb,SAAP;AAKH;;AACD,SAAKR,WAAL;AAAkB;AACd;AACA,eAAO,EACH,GAAGW,KADA;AAEHF,UAAAA,SAAS,EAAE,CAACE,KAAK,CAACF;AAFf,SAAP;AAIH;;AACD;AAAS,aAAOE,KAAP;AAvBb;AAyBH,CA1BD;;AA4BA,MAAMI,eAAe,GAAG,CAACZ,KAAD,EAAQC,IAAR,EAAcC,KAAd,EAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,OAAnC,MAAgD;AACpEK,EAAAA,IAAI,EAAEf,iBAD8D;AAC3CgB,EAAAA,OAAO,EAAE;AAACX,IAAAA,KAAD;AAAQC,IAAAA,IAAR;AAAcC,IAAAA,KAAd;AAAqBC,IAAAA,MAArB;AAA6BC,IAAAA;AAA7B,GADkC;AACEC,EAAAA;AADF,CAAhD,CAAxB;;AAIA,MAAMQ,aAAa,GAAG,OAAO;AACzBH,EAAAA,IAAI,EAAEb;AADmB,CAAP,CAAtB;;AAIA,MAAMiB,UAAU,GAAIT,OAAD,KAAc;AAC7BK,EAAAA,IAAI,EAAEd,WADuB;AACVS,EAAAA;AADU,CAAd,CAAnB;;AAKA,OAAO,MAAMU,eAAe,GAAIC,EAAD,IAAQ,MAAOC,QAAP,IAAoB;AACvD,MAAI;AACAA,IAAAA,QAAQ,CAACJ,aAAD,CAAR;AACA,QAAIK,QAAQ,GAAG,MAAMxB,YAAY,CAACyB,WAAb,CAAyBH,EAAzB,CAArB;AACAC,IAAAA,QAAQ,CAACJ,aAAD,CAAR;AACA,UAAM;AAACb,MAAAA,KAAD;AAAQC,MAAAA,IAAR;AAAcC,MAAAA,KAAd;AAAqBC,MAAAA,MAArB;AAA6BC,MAAAA,IAA7B;AAAmCC,MAAAA;AAAnC,QAA8Ca,QAAQ,CAACE,IAA7D;AACAH,IAAAA,QAAQ,CAACL,eAAe,CAACZ,KAAD,EAAQC,IAAR,EAAcC,KAAd,EAAqBC,MAAM,CAACkB,KAA5B,EAAmCjB,IAAnC,EAAyCC,OAAzC,CAAhB,CAAR;AACH,GAND,CAMC,OAAOiB,CAAP,EAAU;AACPL,IAAAA,QAAQ,CAACL,eAAe,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,CAAhB,CAAR;AACAW,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ,CAXM;AAgBP,eAAef,eAAf","sourcesContent":["import {questionsAPI} from \"../Api/api\";\r\n\r\nconst SET_QUESTION_DATA = \"SET_QUESTION_DATA\"\r\nconst SET_ANSWERS = \"SET_ANSWERS\"\r\nconst SET_LOADING = \"SET_LOADING\"\r\n\r\nlet initialState = {\r\n    question: {\r\n        title: null,\r\n        text: null,\r\n        likes: null,\r\n        author: null,\r\n        date: null,\r\n    },\r\n    answers: [\r\n        // {\r\n        //     author: \"author\",\r\n        //     date: \"\",\r\n        //     likes: 10,\r\n        //     text: \"Lorem fsgdfsg dfg dfg fdg fdg fdg fdg fdgfdgfdgfd\",\r\n        //     id: \"321321321\"\r\n        // },\r\n    ],\r\n    isLoading: false,\r\n}\r\n\r\n\r\nconst questionReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_QUESTION_DATA: {\r\n            return {\r\n                ...state,\r\n                question: {...action.payload},\r\n                answers: action.answers\r\n\r\n            }\r\n        }\r\n        case SET_ANSWERS : {\r\n            return {\r\n                ...state,\r\n                answers: action.answers,\r\n\r\n            }\r\n        }\r\n        case SET_LOADING: {\r\n            debugger\r\n            return {\r\n                ...state,\r\n                isLoading: !state.isLoading\r\n            }\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\nconst setQuestionData = (title, text, likes, author, date, answers) => ({\r\n    type: SET_QUESTION_DATA, payload: {title, text, likes, author, date}, answers\r\n})\r\n\r\nconst toggleLoading = () => ({\r\n    type: SET_LOADING,\r\n})\r\n\r\nconst setAnswers = (answers) => ({\r\n    type: SET_ANSWERS, answers\r\n})\r\n\r\n\r\nexport const getQuestionData = (id) => async (dispatch) => {\r\n    try {\r\n        dispatch(toggleLoading)\r\n        let response = await questionsAPI.getQuestion(id)\r\n        dispatch(toggleLoading)\r\n        const {title, text, likes, author, date, answers} = response.data\r\n        dispatch(setQuestionData(title, text, likes, author.email, date, answers ))\r\n    }catch (e) {\r\n        dispatch(setQuestionData(null, null, null, null, null))\r\n        console.log(e)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default questionReducer;"]},"metadata":{},"sourceType":"module"}