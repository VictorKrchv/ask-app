{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Viktor\\\\WebstormProjects\\\\askProject\\\\client\\\\src\\\\Components\\\\AuthPage\\\\AuthPage.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { useHttp } from \"../hooks/http-hook\";\nimport { AuthContext } from \"../Context/AuthContext\";\nimport { useMessage } from \"../hooks/message-hook\";\nexport const AuthPage = () => {\n  const history = useHistory();\n  const form = useParams().form;\n  const message = useMessage();\n\n  if (form !== 'login' && form !== 'register') {\n    history.push('/auth/login');\n  }\n\n  const auth = useContext(AuthContext);\n  const {\n    request,\n    clearError,\n    error\n  } = useHttp();\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    repassword: ''\n  });\n  useEffect(() => {\n    message(error);\n    clearError();\n  }, [error, message, clearError]);\n  useEffect(() => {\n    setValues({\n      email: '',\n      password: '',\n      repassword: ''\n    });\n    window.M.updateTextFields();\n  }, [form]);\n\n  const registerHandler = async () => {\n    try {\n      request('/api/auth/register', \"POST\", { ...values\n      });\n    } catch (e) {}\n  };\n\n  const loginHandler = async () => {\n    try {\n      const data = await request('/api/auth/login', \"POST\", { ...values\n      });\n      auth.login(data.token, data.userId);\n    } catch {}\n  };\n\n  const changeHandler = e => {\n    setValues({ ...values,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-bg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s4 offset-s4  \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, form === 'login' ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card auth-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-content\",\n    style: {\n      paddingBottom: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-title\",\n    style: {\n      marginBottom: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 92\n    }\n  }, \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/auth/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 116\n    }\n  }, \"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\",\n    id: \"email\",\n    type: \"text\",\n    name: \"email\",\n    value: values.email,\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 41\n    }\n  }, \"Email\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n    id: \"password\",\n    type: \"password\",\n    name: \"password\",\n    value: values.password,\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 41\n    }\n  }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn light-blue darken-2\",\n    style: {\n      marginRight: 10\n    },\n    onClick: loginHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 33\n    }\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card auth-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-content\",\n    style: {\n      paddingBottom: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-title\",\n    style: {\n      marginBottom: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 92\n    }\n  }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/auth/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 116\n    }\n  }, \"\\u0415\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442?\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      marginBottom: \"10px\"\n    },\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\",\n    id: \"email\",\n    type: \"text\",\n    name: \"email\",\n    value: values.email,\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 41\n    }\n  }, \"Email\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n    id: \"password\",\n    type: \"password\",\n    name: \"password\",\n    value: values.password,\n    onChange: changeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 41\n    }\n  }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n    id: \"repassword\",\n    type: \"password\",\n    name: \"repassword\",\n    value: values.repassword,\n    onChange: changeHandler,\n    className: \"yellow-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"repassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 41\n    }\n  }, \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn light-blue darken-2\",\n    onClick: registerHandler,\n    style: {\n      marginRight: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 33\n    }\n  }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"))))));\n};","map":{"version":3,"sources":["C:/Users/Viktor/WebstormProjects/askProject/client/src/Components/AuthPage/AuthPage.js"],"names":["React","useContext","useEffect","useState","Link","useHistory","useParams","useHttp","AuthContext","useMessage","AuthPage","history","form","message","push","auth","request","clearError","error","values","setValues","email","password","repassword","window","M","updateTextFields","registerHandler","e","loginHandler","data","login","token","userId","changeHandler","target","name","value","paddingBottom","marginBottom","marginRight"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\r\nimport {Link, useHistory, useParams} from \"react-router-dom\"\r\nimport {useHttp} from \"../hooks/http-hook\";\r\nimport {AuthContext} from \"../Context/AuthContext\";\r\nimport {useMessage} from \"../hooks/message-hook\";\r\n\r\n\r\nexport const AuthPage = () => {\r\n\r\n\r\n    const history = useHistory()\r\n    const form = useParams().form\r\n    const message = useMessage()\r\n    if (form !== 'login' && form !== 'register') {\r\n        history.push('/auth/login')\r\n    }\r\n\r\n    const auth = useContext(AuthContext)\r\n    const {request, clearError, error} = useHttp()\r\n\r\n    const [values, setValues] = useState({\r\n        email: '',\r\n        password: '',\r\n        repassword: '',\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        message(error)\r\n        clearError()\r\n    }, [error, message, clearError])\r\n\r\n\r\n    useEffect(() => {\r\n        setValues({email: '', password: '', repassword: ''})\r\n        window.M.updateTextFields()\r\n    }, [form])\r\n\r\n    const registerHandler = async () => {\r\n        try {\r\n\r\n            request('/api/auth/register', \"POST\", {...values})\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/login', \"POST\", {...values})\r\n            auth.login(data.token, data.userId)\r\n        } catch {}\r\n    }\r\n\r\n    const changeHandler = e => {\r\n        setValues({...values, [e.target.name]: e.target.value})\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"auth-bg\"></div>\r\n            <div className=\"row \">\r\n                <div className=\"col s4 offset-s4  \">\r\n                    {form === 'login'\r\n                        ? <div className=\"card auth-input\">\r\n                            <div className=\"card-content\" style={{paddingBottom: \"0px\"}}>\r\n                                <div className=\"card-title\" style={{marginBottom: \"30px\"}}><span>Авторизация</span><Link\r\n                                    to=\"/auth/register\">Нет аккаунта?</Link></div>\r\n                                <div>\r\n                                    <div className=\"input-field\">\r\n                                        <input\r\n                                            placeholder=\"Введите email\"\r\n                                            id=\"email\"\r\n                                            type=\"text\"\r\n                                            name=\"email\"\r\n                                            value={values.email}\r\n                                            onChange={changeHandler}\r\n\r\n                                        />\r\n                                        <label htmlFor=\"email\">Email</label>\r\n                                    </div>\r\n                                    <div className=\"input-field\">\r\n                                        <input\r\n                                            placeholder=\"Введите пароль\"\r\n                                            id=\"password\"\r\n                                            type=\"password\"\r\n                                            name=\"password\"\r\n                                            value={values.password}\r\n                                            onChange={changeHandler}\r\n\r\n                                        />\r\n                                        <label htmlFor=\"email\">Пароль</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card-action\">\r\n                                <button\r\n                                    className=\"btn light-blue darken-2\"\r\n                                    style={{marginRight: 10}}\r\n                                    onClick={loginHandler}\r\n                                >\r\n                                    Войти\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        : <div className=\"card auth-input\">\r\n                            <div className=\"card-content\" style={{paddingBottom: \"0px\"}}>\r\n                                <div className=\"card-title\" style={{marginBottom: \"30px\"}}><span>Регистрация</span><Link\r\n                                    to=\"/auth/login\">Есть аккаунт?</Link></div>\r\n                                <div>\r\n                                    <div className=\"input-field\">\r\n                                        <input style={{marginBottom: \"10px\"}}\r\n                                               placeholder=\"Введите email\"\r\n                                               id=\"email\"\r\n                                               type=\"text\"\r\n                                               name=\"email\"\r\n                                               value={values.email}\r\n                                               onChange={changeHandler}\r\n                                        />\r\n                                        <label htmlFor=\"email\">Email</label>\r\n                                    </div>\r\n                                    <div className=\"input-field\">\r\n                                        <input\r\n                                            placeholder=\"Введите пароль\"\r\n                                            id=\"password\"\r\n                                            type=\"password\"\r\n                                            name=\"password\"\r\n                                            value={values.password}\r\n                                            onChange={changeHandler}\r\n\r\n                                        />\r\n                                        <label htmlFor=\"email\">Пароль</label>\r\n                                    </div>\r\n                                    <div className=\"input-field\">\r\n                                        <input\r\n                                            placeholder=\"Повторите пароль\"\r\n                                            id=\"repassword\"\r\n                                            type=\"password\"\r\n                                            name=\"repassword\"\r\n                                            value={values.repassword}\r\n                                            onChange={changeHandler}\r\n                                            className=\"yellow-input\"\r\n                                        />\r\n                                        <label htmlFor=\"repassword\">Повторите пароль</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card-action\">\r\n                                <button\r\n                                    className=\"btn light-blue darken-2\"\r\n                                    onClick={registerHandler}\r\n                                    style={{marginRight: 10}}>\r\n                                    Регистрация\r\n                                </button>\r\n                            </div>\r\n                        </div>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}